<html itemscope itemtype="http://schema.org/Product" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/html">
  <head>
    <!--#include virtual="head.html" -->
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="theme-color" content="#2A3A4B">
    <!--#include virtual="base.html" -->

    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="stylesheet" href="css/all.css">
    <!--#include virtual="fonts.html"-->
    <link rel="manifest" id="manifest-placeholder">
    <script>
        var link = window.location.href.split("#")[0];
        var event = link.split("/");
        var urlDominio = "https://web.syno.live/room";
        
        const queryString = link.split("?")[1];
        const urlParams = new URLSearchParams(queryString);
        const tipo = urlParams.get('tipo');
        const dominio = urlParams.get('dominio');
        const pathSub = urlParams.get('sub');
        const prefix = urlParams.get('prefix');
        if(dominio!==null){
            urlDominio="https://"+dominio
            if(pathSub!==null){
                urlDominio="https://"+dominio+"/"+pathSub
            }
        }
        localStorage.setItem("tipo",tipo)
        localStorage.setItem("event",event)
        localStorage.setItem("urlDominio",urlDominio)
        localStorage.setItem("prefix",prefix)
        
        var topchat= `
        height: calc(100vh - 100px) !important;
        top: 80px;`;
        if(tipo === "sistema"){
            topchat=`
            height: calc(100vh - 20px) !important;
            top: 10px;
            `;
        }
        if(event[event.length-1].startsWith("EV", 2)){
            const style = document.createElement('style');
            style.textContent = `
            .premeeting-screen {
                background: #161a1f !important;    
            }
            .send-button svg path {
                fill: #59b179 !important;
            }
            body, #react > div:nth-child(1) {
                background: #161a1f!important;
            }
            div[role="dialog"] {
                background-color: #1c2126!important;
                overflow: hidden !important;
                border-radius: 1.2rem !important;
                min-width: 70vw!important;
                margin-left: auto!important;
                margin-right: auto!important;
                box-shadow: 0px 8px 14px rgba(25, 39 ,52, 0.08), 0px 2px 6px rgba(25 ,39 ,52,0.04) !important;
            }
            div#smileysContainer {
                padding: 10px !important;
                border-radius: 10px !important;
                overflow: hidden !important;
                background-color: #242a30!important;
                border: none!important;
                margin-bottom: 10px !important;
                box-shadow: 0px 8px 14px rgba(25, 39 ,52, 0.08), 0px 2px 6px rgba(25 ,39 ,52,0.04) !important;
            }


            .poll-create-container.poll-container textarea,
            div#chat-input {background-color: #242a30;border: 0;border-radius: 7px;}
            #sideToolbarContainer {
                border-radius: 1.2rem;
                background: #1c2126!important;
            }
            .toolbox-button {border-radius: 50% !important;overflow: hidden !important;}
            .stage-participant-label {bottom: 15px !important;}


            div#chat-input:focus-within {border: 3px solid #2f3338 !important;}

            #usermsg:active, #usermsg:focus {border: none!important;}

            .smileys-panel {border: none;background: none!important;}

            .poll-footer {background-color: #1c2126!important;}

            .poll-create-container.poll-container {}

            .toolbox-icon.toggled.disabled {background-color: #161a1f!important;}

            .reactions-menu{
                background: #1c2126!important;
                border-radius:7px!important;
                margin-bottom:15px!important;
            }
            .filmstrip:hover .resizable-filmstrip {
                background-color: #1c2126!important;
                border-radius: 15px !important;
            }
            .toggleFilmstripContainer {
                background-color: #434a52!important;
                height: 40px!important;
                width: 40px!important;
                border-radius: 20px!important;
                left: calc(-40px - 3px - 4px)!important;
            }
            .toolbox-content-items {
                padding: 15px !important;
                border-radius: 50px !important;
                background: #1c2126!important;
            }
            .toolbox-icon.toggled {
                background: #242a30!important;
            }
            .toolbox-icon:hover {
                background: #434a52!important;
            }
            .audio-preview-content,
            .toolbox-button-wth-dialog.context-menu > div:nth-child(2) > div{
                box-shadow: 0px 8px 14px rgb(25 39 52 / 8%), 0px 2px 6px rgb(25 39 52 / 4%) !important;
                border-radius: 7px !important;
                background-color: #1c2126 !important;
                overflow:auto;
                margin-bottom:15px !important;
            }
            .audio-preview>div:nth-child(2), .video-preview>div:nth-child(2) {
                outline: 0 !important;
                padding: 0 !important;
                background: none!important;
                margin-bottom: 15px !important;
                box-shadow: 0px 8px 14px rgb(25 39 52 / 8%), 0px 2px 6px rgb(25 39 52 / 4%) !important;
            }
            .toolbox-button-wth-dialog.context-menu > div:nth-child(2) > div > div:not(:empty) {
                padding: 16px 5px;
            }
            .audio-preview-speaker:hover, .toolbox-button-wth-dialog.context-menu > div:nth-child(2) > div > div > div:hover,
            .toolbox-button-wth-dialog.context-menu > div:nth-child(2) > div > div > div:hover {
                background-color: #242a30!important;
                border-radius: 5px!important;
            }


            .stage-participant-label > div {
                color: #FFF !important;
                padding: 10px 26px !important;
                overflow: hidden !important;
                max-width: 50% !important;
                opacity:0.7 !important;
                background: #1c2126 !important;
                white-space: nowrap !important;
                border-radius: 7px !important;
                text-overflow: ellipsis !important;
            }
            .stage-participant-label {
                bottom: 15px !important;
            }
            div.atlaskit-portal > div > div > div > div:nth-child(2){
                width: unset!important;
                max-width: unset!important;
            }
            div[role="dialog"] > div{
                background-color: #1c2126!important;
            }

            div[role="presentation"] {
                background-color: rgba(22 ,26, 31,0.4) !important;
                backdrop-filter: blur(10px) !important;
            }
            .video-input-preview.video-preview-has-error {
                border-radius: 0.7rem !important;
            }  
            @media only screen and (min-width: 960px) {
                #sideToolbarContainer {
                    bottom: -10px !important;
                    left: 10px !important;
                    ${topchat}
                }
                .stage-filmstrip span:not(.tile-view) .filmstrip, .vertical-filmstrip span:not(.tile-view) .filmstrip {
                    height: calc(100vh - 30px) ;
                    bottom: 10px ;
                    right: 10px ;
                    top: 10px ;
                }
                div#preview {
                    border-radius: 1rem!important;
                    background: #323232!important;
                    height: calc(60vh - 20px)!important;
                    width: 50vw!important;
                    margin-left: calc(105vw - 10px)!important;
                    display: flex!important;
                    flex-direction: column!important;
                    align-self: center!important;
                    margin-right: 20px!important;
                    overflow: hidden;
                }
                .premeeting-screen .content {
                    margin-top: 90px !important;
                    margin-left: 15vw;
                }
            }
            .overlay__container, .overlay__container-light {
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                position: fixed;
                z-index: 1016;
                background: #161A1F!important;
            }

            .inlay {
                margin-top: 14%;
                -webkit-border-radius: 4px;
                border-radius: 1rem!important;
                background-clip: padding-box;
                padding: 40px 38px 44px;
                color: #fff;
                background: #1c2126!important;
                text-align: center;
            }

            .jitsi-icon-default svg {
                fill: #f9fafa !important;
            }
            .premeeting-screen.lobby-screen .content-controls h1.title{
                display:none !important;
            }
            .premeeting-screen.lobby-screen input.field[data-testid="lobby.nameField"] {
                user-select: none !important;
                pointer-events: none !important;
                visibility: hidden !important;
                max-height: 0px !important;
                padding: 0px !important;
                margin: 0px !important;
            }`;

/*.jss65 {
    border-radius: 40px;
}

.jss65.secondary {
    background: #293039;
}
.jss3 {
    color: #040404;
    margin-right: 4px;
    background-color: #fad489;
}
.jss306 {
    background: transparent;
}
*/
            document.head.appendChild(style);
        }

    </script>

    <style>
        
    </style>
    <script>
        // Dynamically generate the manifest location URL. It must be served from the document origin, and we may have
        // the base pointing to the CDN. This way we can generate a full URL which will bypass the base.
        document.querySelector('#manifest-placeholder').setAttribute('href', window.location.origin + '/manifest.json');

        document.addEventListener('DOMContentLoaded', () => {
            if (!JitsiMeetJS.app) {
                return;
            }

            JitsiMeetJS.app.renderEntryPoint({
                Component: JitsiMeetJS.app.entryPoints.APP
            })

            const inIframe = () => {
                try {
                    return window.self !== window.top;
                } catch (e) {
                    return true;
                }
            };

            const isElectron = navigator.userAgent.includes('Electron');
            const shouldRegisterWorker = !isElectron && !inIframe() && 'serviceWorker' in navigator;

            if (shouldRegisterWorker) {
                navigator.serviceWorker
                    .register(window.location.origin + '/pwa-worker.js')
                    .then(reg => {
                        console.log('Service worker registered.', reg);
                    })
                    .catch(err => {
                        console.log(err);
                    });
            }
        });
    </script>
    <script>
        // IE11 and earlier can be identified via their user agent and be
        // redirected to a page that is known to have no newer js syntax.
        if (window.navigator.userAgent.match(/(MSIE|Trident)/)) {
            var roomName = encodeURIComponent(window.location.pathname);
            window.location.pathname = 'static/recommendedBrowsers.html';
        }

        window.indexLoadedTime = window.performance.now();
        console.log("(TIME) index.html loaded:\t", indexLoadedTime);
        // XXX the code below listeners for errors and displays an error message
        // in the document body when any of the required files fails to load.
        // The intention is to prevent from displaying broken page.
        var criticalFiles = [
            "config.js",
            "utils.js",
            "do_external_connect.js",
            "interface_config.js",
            "logging_config.js",
            "lib-jitsi-meet.min.js",
            "app.bundle.min.js",
            "all.css"
        ];
        var loadErrHandler = function(e) {
            var target = e.target;
            // Error on <script> and <link>(CSS)
            // <script> will have .src and <link> .href
            var fileRef = (target.src ? target.src : target.href);
            if (("SCRIPT" === target.tagName || "LINK" === target.tagName)
                && criticalFiles.some(
                    function(file) { return fileRef.indexOf(file) !== -1 })) {
                window.onload = function() {
                    // The whole complex part below implements page reloads with
                    // "exponential backoff". The retry attempt is passes as
                    // "rCounter" query parameter
                    var href = window.location.href;

                    var retryMatch = href.match(/.+(\?|&)rCounter=(\d+)/);
                    var retryCountStr = retryMatch ? retryMatch[2] : "0";
                    var retryCount = Number.parseInt(retryCountStr);

                    if (retryMatch == null) {
                        var separator = href.indexOf("?") === -1 ? "?" : "&";
                        var hashIdx = href.indexOf("#");

                        if (hashIdx === -1) {
                            href += separator + "rCounter=1";
                        } else {
                            var hashPart = href.substr(hashIdx);

                            href = href.substr(0, hashIdx)
                                + separator + "rCounter=1" + hashPart;
                        }
                    } else {
                        var separator = retryMatch[1];

                        href = href.replace(
                            /(\?|&)rCounter=(\d+)/,
                            separator + "rCounter=" + (retryCount + 1));
                    }

                    var delay = Math.pow(2, retryCount) * 2000;
                    if (isNaN(delay) || delay < 2000 || delay > 60000)
                        delay = 10000;

                    var showMoreText = "show more";
                    var showLessText = "show less";

                    document.body.innerHTML
                        = "<div style='"
                        + "position: absolute;top: 50%;left: 50%;"
                        + "text-align: center;"
                        + "font-size: medium;"
                        + "font-weight: 400;"
                        + "transform: translate(-50%, -50%)'>"
                        + "Uh oh! We couldn't fully download everything we needed :("
                        + "<br/> "
                        + "We will try again shortly. In the mean time, check for problems with your Internet connection!"
                        + "<br/><br/> "
                        + "<div id='moreInfo' style='"
                        + "display: none;'>" + "Missing " + fileRef
                        + "<br/><br/></div>"
                        + "<a id='showMore' style='"
                        + "text-decoration: underline;"
                        + "font-size:small;"
                        + "cursor: pointer'>" + showMoreText + "</a>"
                        + "&nbsp;&nbsp;&nbsp;"
                        + "<a id ='reloadLink' style='"
                        + "text-decoration: underline;"
                        + "font-size:small;"
                        + "'>reload now</a>"
                        + "</div>";

                    var reloadLink = document.getElementById('reloadLink');
                    reloadLink.setAttribute('href', href);

                    var showMoreElem = document.getElementById("showMore");
                    showMoreElem.addEventListener('click', function () {
                            var moreInfoElem
                                    = document.getElementById("moreInfo");

                            if (showMoreElem.innerHTML === showMoreText) {
                                moreInfoElem.setAttribute(
                                    "style",
                                    "display: block;"
                                    + "color:#FF991F;"
                                    + "font-size:small;"
                                    + "user-select:text;");
                                showMoreElem.innerHTML = showLessText;
                            }
                            else {
                                moreInfoElem.setAttribute(
                                    "style", "display: none;");
                                showMoreElem.innerHTML = showMoreText;
                            }
                        });

                    window.setTimeout(
                        function () { window.location.replace(href); }, delay);

                    // Call extra handler if defined.
                    if (typeof postLoadErrorHandler === "function") {
                        postLoadErrorHandler(fileRef);
                    }
                };
                window.removeEventListener(
                    'error', loadErrHandler, true /* capture phase */);
            }
        };
        window.addEventListener(
            'error', loadErrHandler, true /* capture phase type of listener */);
    </script>
    <script><!--#include virtual="/config.js" --></script><!-- adapt to your needs, i.e. set hosts and bosh path -->
    <!--#include virtual="connection_optimization/connection_optimization.html" -->
    <script src="libs/do_external_connect.min.js?v=1"></script>
    <script src="interface_config.js?v=1"></script>
    <script><!--#include virtual="/logging_config.js" --></script>
    <script src="libs/lib-jitsi-meet.min.js?v=139"></script>
    <script src="libs/app.bundle.min.js?v=139"></script>
    <!--#include virtual="title.html" -->
    <!--#include virtual="plugin.head.html" -->
    <!--#include virtual="static/welcomePageAdditionalContent.html" -->
    <!--#include virtual="static/welcomePageAdditionalCard.html" -->
    <!--#include virtual="static/settingsToolbarAdditionalContent.html" -->
  </head>
  <body>
    <noscript aria-hidden="true">
        <div>JavaScript is disabled. </br>For this site to work you have to enable JavaScript.</div>
    </noscript>
    <!--#include virtual="body.html" -->
    <div id="react" role="main"></div>
    <script src="noSleep.js"></script>
    <script>
        document.addEventListener('click', function enableNoSleep() {
            document.removeEventListener('click', enableNoSleep, false);
            noSleep.enable();
            }, false);
    </script>
  </body>
</html>
